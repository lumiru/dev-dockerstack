
<VirtualHost *:80>
        DocumentRoot /var/www/htdocs
        # ServerAlias localhost $_apache_localhost_aliases_    
        <Directory /var/www/htdocs>
                Options -Indexes +FollowSymLinks +MultiViews
                AllowOverride all
                Order allow,deny
                allow from all
                #if Apache 2.4
                <IfModule mod_authz_core.c>
                        Require all granted
                </IfModule>
        </Directory>

        # Force to use ssl by redirect all http trafic to https
        # RewriteEngine On
        # RewriteCond %{HTTPS} !=on
        # RewriteRule ^/?(.*) https://%{SERVER_NAME}/$1 [R,L]

        ErrorLog ${APACHE_LOG_DIR}/localhost-error.log
        CustomLog ${APACHE_LOG_DIR}/localhost-access.log combined
</VirtualHost>

<IfModule mod_ssl.c>
        <VirtualHost *:443>
                # ServerAlias localhost $_apache_localhost_aliases_
                DocumentRoot /var/www/htdocs
                <Directory /var/www/htdocs>
                                Options -Indexes +FollowSymLinks +MultiViews
                                AllowOverride all
                                Order allow,deny
                                allow from all
                                #if Apache 2.4
                                <IfModule mod_authz_core.c>
                                        Require all granted
                                </IfModule>
                </Directory>

                ErrorLog ${APACHE_LOG_DIR}/localhost-error.log
                CustomLog ${APACHE_LOG_DIR}/localhost-access.log combined

                #   SSL Engine Switch:
                SSLEngine on
                SSLCertificateFile    /etc/ssl/certs/localhost.crt
                SSLCertificateKeyFile /etc/ssl/private/localhost.key

                <FilesMatch "\.(cgi|shtml|phtml|php)$">
                                SSLOptions +StdEnvVars
                </FilesMatch>
                <Directory /usr/lib/cgi-bin>
                                SSLOptions +StdEnvVars
                </Directory>

                #   SSL Protocol Adjustments:
                BrowserMatch "MSIE [[2-6]]" \
                                nokeepalive ssl-unclean-shutdown \
                                downgrade-1.0 force-response-1.0
                # MSIE 7 and newer should be able to use keepalive
                BrowserMatch "MSIE [[17-9]]" ssl-unclean-shutdown
        </VirtualHost>
</IfModule>
